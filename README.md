整体架构：
本项目借鉴mvc三层架构的思想，整体扩散到局部，利于维护和更新。
项目架构如图所示：
[图片]
cache层是关于缓存设计的实现，缓存采用的是redis，主要缓存了一些热数据及经常更新更改的数据。
common层是一些业务常用的相同的结构体和方法。
config层是一些基本的配置选项，mysql、redis、静态文件路径等。使用yaml文件来统一管理。
dao层是对数据库的增删查改操作，无关业务代码，只面向底层数据。
数据库采用的是关系型数据库mysql,数据模型中存在着一对一，一对多，多对多的关系。总共有设计了六张表，其中两张关系表，四张实体表。user->video，video->user是多对多关系，user<->user是一对一，usesr->comment、user->message、video->comment则都是一对多关系。
handle层是面向前端请求提供的对外接口，负责整理好数据，将数据规范化返回给前端。
middleware中间件层，用来检验用户token，判断注册账号密码是否符合规范。
public层用来存放静态资源，储存传上来的视频以及切割好的图片，用作路径映射。
service层用来实现主要的业务逻辑。将处理完后的数据传给顶层的handle。
utls工具层，主要是提供一些字符串变换、解析，及外部工具的使用的方法。
项目结构：
[图片]
[图片]
dao层用来设计对db数据库的访问并把数据封装对象的过程。代码设计全部采用单例模式，gorm框架对数据库进行访问，直接反射到对应的结构体中。
Service层用来实现基本的服务逻辑，为handle层提供服务，通过调用dao层来调用数据实现对应的逻辑。
handle拿到前端请求的参数，对其进行初步处理，然后调用service层的方法实现对应的功能。
中间件层，当前端注册请求过来时，会先经过中间件结构，中间件中会判断账号密码的合理性，若不合理，直接调用gin框架的abort（）进行终止，终止掉后面所有的该请求下的函数。其次设计了用户权限，对token的检查，检查其是否有效，是否正确。其中token是jwt生成的。在utls包中封装了token的生成与解析的方法。
cache层，用redis对like表和follow表中登录用户的状态进行缓存，用的是redis的连接池技术。
config层，手写配置文件项.yaml，然后利用代码生成工具生成对应的结构体。